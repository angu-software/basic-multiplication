#!/bin/bash

TCR_HOME="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
TCR_HOME="${TCR_HOME:-"$(cd "$(dirname "$0")" && pwd)"}"

TCR_WORK_DIRECTORY="${TCR_WORK_DIRECTORY:-"$(pwd)"}"

source "$TCR_HOME/lib/path.sh"
source "$TCR_HOME/lib/lock_file.sh"
source "$TCR_HOME/lib/tcr/error_consts.sh"
source "$TCR_HOME/lib/tcr/action_consts.sh"

source "$TCR_HOME/lib/tcr/tcr_action_enable.sh"

tcr() {
    local action="$1"

    case "$action" in
        "$TCR_ACTION_ENABLE")
            tcr_action_enable
        ;;
        "$TCR_ACTION_DISABLE")
            disable_tcr
        ;;
        *)
            error_raise "$TCR_ERROR_TCR_UNKNOWN_ACTION"
        ;;
    esac
}

# -- Actions -- #

disable_tcr() {
    lock_file_remove
    print_status 'OFF'
}

# -- Main -- #

if [ "${BASH_SOURCE[0]}" = "$0" ]; then
    tcr "$@"
fi